// Generated by CoffeeScript 1.8.0
(function() {
  var clean, coffee, coffeePipes, coffeelint, gulp, gutil, mocha, watch;

  gulp = require('gulp');

  gutil = require('gulp-util');

  coffee = require('gulp-coffee');

  mocha = require('gulp-mocha');

  clean = require('gulp-clean');

  watch = require('gulp-watch');

  watch = require('gulp-watch');

  coffeelint = require('gulp-coffeelint');

  require('coffee-script/register');

  gulp.task('default', ['mocha']);

  gulp.task('clean', function() {
    return gulp.src('node_modules', {
      read: false
    }).pipe(clean());
  });

  coffeePipes = function(pipe) {
    return pipe.pipe(coffeelint()).pipe(coffeelint.reporter()).pipe(coffee({
      bare: true
    }).pipe(mocha({
      reporter: process.env.MOCHA_REPORTER || 'dot'
    })).on('error', function() {
      return this.emit('end');
    }));
  };

  gulp.task('mocha', function() {
    return coffeePipes(gulp.src('spec/*.coffee'));
  });

  gulp.task('watch', function() {
    return gulp.src(['src/**/*.coffee', 'spec/*.coffee']).pipe(watch(function(files) {
      return coffeePipes(files);
    }));
  });

}).call(this);
